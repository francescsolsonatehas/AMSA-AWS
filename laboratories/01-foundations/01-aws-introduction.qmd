---
title: Unit 1 · Lab for Preparation and Basic Administration Commands
subtitle: Practical Labs on Systems and Applications Administration
lang: en
---

##  Preparing the Remote Work Environment {#preparant-lentorn-de-treball-remot}

To prepare the work environment on AWS, we will follow these steps:

1. Create an AWS Academy account
2. Access the AWS dashboard
3. Create an SSH key pair
4. Launch an EC2 instance
5. Connect to the EC2 instance via SSH

### Step 1: Creating an AWS Academy Account {#pas-1-creacio-dun-compte-daws-academy}

Check your email to see if you have received an email from AWS Academy with the subject *Course Invitation*. If you haven’t received it, let me know. The email will contain a button labeled **Get Started**. Click this button to begin the registration process.

![](../../figs/laboratories/01-intro/login0.png)

After clicking the **Get Started** button, you will be redirected to the AWS Academy login page. Now click the **Create my account** button to start the registration process, as shown below:

![](../../figs/laboratories/01-intro/login1.png)

Choose a password and complete the registration process. Once you have completed the registration, you will be redirected to the AWS Academy dashboard. Congratulations! You have successfully created your AWS Academy account.

### Step 2: Accessing the AWS Dashboard {#pas-2-acces-al-tauler-daws}

Now that you have created your AWS Academy account, you can access the AWS dashboard. The first thing you need to do is click the **Courses** tab (1) on the left side of the screen. You will see a list of courses available to you. Click the course **AWS Academy Learner Lab**  (2), as shown in the screenshot below:

![](../../figs/laboratories/01-intro/login2.png)

::: {.callout-note}
The course **AWS Academy Learner Lab**  is the course you will use for these practical labs.

:::

Now we need to look for the **Modules** tab (1) on the left side of the screen. Click on it and you will see a list of modules available to you. Click on the **AWS Academy Learner Lab **module (2), as shown below:

![](../../figs/laboratories/01-intro/login3.png)

You will now be asked to accept the course terms and conditions. Do this by scrolling to the bottom of the page and clicking the button  **I Agree**.

![](../../figs/laboratories/01-intro/login4.png)

After accepting the terms and conditions, you just need to click the button **Start Lab**.

![](../../figs/laboratories/01-intro/login5.png)

Now give it a few minutes to load. You will see this animation while the lab is being prepared for you:

![](../../figs/laboratories/01-intro/login6.png)

Finally, when the lab is ready, you will see that the dot next to AWS is green. You will also see a timer counting down from 4 hours. This is the time you have to work in the lab. To the left of the timer, you will see your budget status. You have a budget of $50 to spend on AWS services. Click on AWS to access the AWS dashboard, as shown below:

![](../../figs/laboratories/01-intro/login7.png)


::: {.callout-important title="Considerations about the laboratories"}
The labs are a real AWS environment, so it’s important to be careful with resources and your actions.

- If you exceed the $50 budget, you will no longer have access to the AWS dashboard and you will lose your work. Make sure to monitor your budget — it is each student’s responsibility to stay within the limit.
- The labs last for 4 hours. Once the 4 hours have passed, the session will expire and you will not be able to access the AWS dashboard. However, this does not mean you will automatically lose your work. 
- The tasks and resources you have created (such as EC2 instances, S3 buckets, etc.) will remain accessible between sessions, as long as you do not delete them manually. You can restart the lab as many times as you want, but it is good practice to stop or shut down services you no longer need to avoid consuming unnecessary resources by clicking **Reset**.
- Therefore, if you start a lab and leave it unfinished, you will be able to resume it in a later session.Per tant, si comences un laboratori i el deixes a mig fer, podràs reprendre'l en una sessió posterior. 
:::

Great! You have now accessed the AWS dashboard. You will see a screen similar to the one below:

![](../../figs/laboratories/01-intro/login8.png)

### Step 3: Creating an SSH key pair {#pas-3-importació-de-la-clau-pública-a-aws}

The SSH key is a security mechanism that enables secure authentication between two systems. The Amazon EC2 server holds the public key, and the client (your local computer) holds the private key. When the client connects to the server, the server checks whether the client’s public key matches the server’s private key. If the keys match, the client connects to the server. Therefore, the private key must never be shared with anyone, while the public key can be shared freely and used on multiple servers. Currently, there is no mechanism to obtain the private key from the public key.

To create an SSH key pair, we will use the **ssh-keygen** command. This command is available on most operating systems, including Linux, macOS, and Windows (via PowerShell or Windows Subsystem for Linux - WSL). If you are using Windows and do not have access to ssh-keygen, you can use tools like PuTTYgen to generate SSH keys.

This command has several parameters that allow you to customize the SSH key. The most common parameters are:

* `-t`: Specifies the encryption type of the key. The most common types are rsa, dsa, ecdsa, and ed25519.
* `-f`: Specifies the name of the file where the key will be saved.
* `-b`: Specifies the length of the key in bits.

The first step to create the SSH key pair is to make sure the **.ssh** directory exists. To do this, open a terminal on your local computer and type the following command:

```bash
mkdir .ssh
```

::: {.callout-warning}
If the **.ssh** directory already exists, you will get an error indicating that the directory already exists. This is normal; it simply means the directory was already there.
:::

Now we will create the SSH key pair. Type the following command:

```bash
ssh-keygen -t rsa -f .ssh/aws-keypair
```

You will be asked to enter a passphrase. You can leave it empty by pressing `Enter` twice (I recommend doing this for simplicity; otherwise, you will have to enter the passphrase every time you connect to the remote machine). You should see an output similar to the following:
```
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in .ssh/aws-keypair
Your public key has been saved in .ssh/aws-keypair.pub
The key fingerprint is:
SHA256:uhINFvYaJh6MbwFQCXdZyrW7W46jFGHUhLglDgQ5OYE ferran@DESKTOP-0841
+---[RSA 3072]----+
|XBooo*+          |
|E.++*o..         |
| O ==o.          |
|. B.=...         |     
| o *.=. S        |
|  + o..o         |
| .  ..o .        |
|   .. .*         |
|    .o+..        |
+----[SHA256]-----+
```

`ssh-keygen` is the command to generate the key pair. The **-t rsa** option specifies the type of key to create, in this case an RSA key, and **-f .ssh/aws-keypair** specifies the filename for the key pair. You can name the file whatever you like, but it’s important to remember the name you choose. In this example, we are naming it aws-keypair. I recommend using the same name to avoid confusion later.

:::{.callout-tip title="Entendre les claus SSH - Veure video"}
It is essential to understand how public and private keys work and how they are used to establish a connection SSH, **see [aquest vídeo](https://www.youtube.com/watch?v=dPAw4opzN9g)**.
:::

We can check the contents of the directory `.ssh` with:

```bash
ls .ssh
```

We should now see two files, `aws-keypair` and `aws-keypair.pub`. The first is the private key and the second is the public key. The private key should never be shared with anyone, while the public key is the one that should be shared with the remote machine. A useful command to inspect the contents of a file is `cat. For example, to view the contents of the public key, type the following command:

```bash
cat .ssh/aws-keypair.pub
```

::: {.callout-note}
You can also inspect the contents of the `.ssh` folder and the files inside it using the File Explorer (or Finder on Mac devices). But be careful — by default, folders and files that start with a dot,  `.` (like `.ssh`) are hidden in most file explorers, and if you want to see them, you'll need to enable the option to show hidden files. Check [this tutorial](https://en.eloutput.com/Tutorials/step-by-step/show-hidden-files-windows-macos/) to see how to do it on your operating system.

Another thing to keep in mind is that file extensions (i.e., the part of the file name that comes after the last `.`) are also usually hidden. This means that in the File Explorer you might see two files named `aws-keypair` when in reality one is `aws-keypair` and the other is `aws-keypair.pub`. Here's [a tutorial]https://www.gottheknack.com/a-how-to/file-systems/file-ext-and-details-view/file-ext-and-details-view.html) on how to show file extensions on your operating system.

You don’t need to worry about any of this if you’re using the terminal — the terminal will show files and their extensions as they are.
**However, to view hidden files and folders (those that start with a `.`), you’ll need to use the command `ls -a`**.

```bash
ls -a .ssh
```
:::

We have created an SSH key pair that we can use to connect to remote machines. Next, we will import our public key into AWS.

### Step 4: Importing the public key into AWS {#pas-4-importacio-de-la-clau-publica-a-aws}

Ara que hem creat el nostre parell de claus SSH, hem d'importar la clau pública a AWS per poder utilitzar-la per connectar-nos a les instàncies EC2 que crearem més endavant. Per fer-ho, hem de tornar al tauler d'AWS, que és on vam acabar després de completar [el Pas 2](#pas-2-acces-al-tauler-daws).

Ara anirem a la barra de cerca i buscarem el servei `EC2`. Escriviu `EC2` a la barra de cerca i feu clic al servei `EC2`, com es mostra a continuació:

![AWS Dashboard](../../figs/laboratories/01-intro/searchbar.png)

Ara veureu el tauler d'EC2. A la part esquerra de la pantalla, veureu una llista d'opcions. Feu clic a `Import key pair`, com es mostra a continuació:

![AWS Dashboard](../../figs/laboratories/01-intro/keypair1.png)

Now you need to give a name to the key pair. You can name it whatever you like, but I suggest naming it `aws-keypair` to keep things simple.
You can now insert the public key into the text box, or you can click the Browse button to select the public key file from your computer.
Just click `Browse`, navigate to the `.ssh` folder, and select the `aws-keypair.pub` file.
But remember, the file must be the public key file, not the private key file. That means the file must have the `.pub` extension.
Once you’ve selected the file, click `Import Key Pair`.

![AWS Dashboard](../../figs/laboratories/01-intro/keypair2.png)

::: {.callout-note}
Recordeu que com s'ha explicat a la nota anterior, potser no veureu la carpeta `.ssh` a l'explorador de fitxers i potser no veureu l'extensió `.pub` del fitxer. Si teniu problemes amb això, us recomano utilitzar el terminal per copiar el contingut del fitxer com es mostra a la captura de pantalla anterior.
:::

You should now see the key pair you just imported in the list of key pairs. There will probably be another key pair there — that’s fine, you can ignore it. Perfect! You’ve now imported the public key into AWS. Next, we’ll create an EC2 instance and configure it to use the key pair we just imported.

### Step 5: Creating an EC2 instance {#pas-5-creacio-duna-instancia-ec2}

El primer pas serà anar al tauler d'EC2. Podeu fer-ho escrivint `EC2` a la barra de cerca i fent clic al servei `EC2`, com vam fer al principi del [Pas 3](#pas-3-importació-de-la-clau-pública-a-aws):

![AWS Dashboard](../../figs/laboratories/01-intro/searchbar.png)

Un cop estigueu al tauler d'EC2, feu clic a `Instances` > `Launch Instance`, com es mostra a continuació:

![AWS Dashboard](../../figs/laboratories/01-intro/ec2-1.png)

Deixeu-ho tot com està excepte l'opció `Key pair (login)` (Parell de claus (inici de sessió)) (haureu de desplaçar-vos cap avall per trobar-la). Feu clic al menú desplegable i seleccioneu el parell de claus que heu importat anteriorment. En aquest cas, hauria de ser `aws-keypair`. Feu clic a `Launch instance`, com es mostra a continuació:

![AWS Dashboard](../../figs/laboratories/01-intro/ec2-2.png)

Ara tenim una instància EC2 en execució amb la nostra clau pública importada. Això significa que tenim una màquina remota a AWS a la qual podem connectar-nos des del nostre ordinador local mitjançant SSH. Vegem com fer-ho.

### Pas 6: Connexió a la instància EC2 {#pas-6-connexio-a-la-instancia-ec2}

Abans de connectar-nos a la màquina remota, vull que proveu alguns ordres al vostre ordinador local que després repetirem un cop estiguem connectats a la màquina remota. Una de les ordres és `pwd`, que significa `print working directory`, com ja s'ha comentat anteriorment. Aquesta ordre us mostrarà la ruta al directori en què esteu actualment. L'altra ordre és `whoami`, que us mostrarà el nom d'usuari amb el qual heu iniciat sessió. Proveu aquestes ordres al vostre ordinador local i recordeu-ne la sortida. Les repetirem un cop estiguem connectats a la màquina remota.

A continuació es mostra la sortida que obtinc al meu ordinador local:

```powershell
PS C:\Users\fnao> pwd

PS C:\Users\fnao> whoami
gft\fnao
PS C:\Users\fnao>
```

::: {.callout-warning}
El ordinador local que utilitzo és un portàtil amb Windows, així que la sortida serà diferent de la vostra si esteu utilitzant un Mac o un ordinador amb Linux.
Substitueix `fnao` pel vostre nom d'usuari i `C:\Users\fnao` per la ruta al vostre directori d'usuari.
:::

Per connectar-nos a la instància EC2, utilitzarem el terminal del nostre ordinador local. Així com vam fer al principi [Pas 3](#pas-3-importació-de-la-clau-pública-a-aws), obriu un terminal al vostre ordinador local. Utilitzarem l'ordre `ssh` per connectar-nos a la màquina remota. L'ordre tindrà aquest aspecte:

```bash
ssh -i .ssh/aws-keypair ec2-user@<public-ip>
``` 

Haureu de substituir `<public-ip>` per la IP pública de la instància EC2. Per trobar la IP pública, torneu al tauler d'EC2 i feu clic a `Instances` a la part esquerra de la pantalla. Veureu una llista d'instàncies, feu clic a la instància que heu creat. Veureu la IP pública a la part inferior de la pantalla com es mostra a continuació:

![AWS Dashboard](../../figs/laboratories/01-intro/ec2-3.png)

Tant l'adreça `Public IPv4 address` com el `Public IPv4 DNS` es poden utilitzar com a `<public-ip>` a l'ordre `ssh`. Copieu el que preferiu i enganxeu-lo a l'ordre `ssh`. L'ordre hauria d'assemblar-se a alguna cosa així si utilitzeu l'adreça IP:

```bash
ssh -i .ssh/aws-keypair ec2-user@98.84.68.70
```

o així si utilitzeu el DNS:

```bash
ssh -i .ssh/aws-keypair ec2-user@ec2-98-84-68-70.compute-1.amazonaws.com
```

Si és la primera vegada que us connecteu a la màquina remota, obtindreu una advertència. Això és normal, només heu d'escriure `yes` i prémer `Enter`. Ara hauríeu de estar connectats a la màquina remota. Veureu un missatge similar al següent:

```
   ,     #_
   ~\_  ####_        Amazon Linux 2023
  ~~  \_#####\
  ~~     \###|
  ~~       \#/ ___   https://aws.amazon.com/linux/amazon-linux-2023
   ~~       V~' '->
    ~~~         /
      ~~._.   _/
         _/ _/
       _/m/'
Last login: Sun Mar  2 09:50:33 2025 from 79.156.58.43
[ec2-user@ip-172-31-86-82 ~]$
```

::: {.callout-important title="Exercici"}
Investiga quin és el significat i la importànica del missatge que acceptes quan et connectes per primera vegada a la màquina remota. Per què és important acceptar aquest missatge? Què significa? Quines implicacions té?
:::

Fantàstic! Ara esteu connectats a la màquina remota. És important entendre que a partir d'ara, les ordres que escrivim s'executaran a la màquina remota, no al nostre ordinador local. Per comprovar-ho, escriviu les ordres `pwd` i `whoami` com vam fer al nostre ordinador local. Veureu que la sortida és diferent. A continuació es mostra la sortida que obtinc a la màquina remota:

```bash
[ec2-user@ip-172-31-86-82 ~]$ pwd
/home/ec2-user
[ec2-user@ip-172-31-86-82 ~]$ whoami
ec2-user
[ec2-user@ip-172-31-86-82 ~]$
```

::: {.callout-note}
Aquesta vegada la sortida hauria de ser la mateixa que la meva. Observeu que el prompt `[ec2-user@ip-172-31-86-82 ~]$` és diferent, però això no forma part de les sortides de les ordres. Les sortides de les ordres són `pwd` i `whoami`, que són `home/ec2-user` i `ec2-user` respectivament. El prompt és només una manera de mostrar-vos on esteu al sistema de fitxers i qui sou com a usuari connectat.
:::


::: {.callout-important title="Exercici"}

Utilitza la comanada `lastlog` i investiga com administrador com podem trueure partit d'aquesta informació.

:::

## Execució en el nostre laboratori remot {#execucio-en-el-nostre-laboratori-remot}

En aquest apartat de laboratori, treballarem la comunicació amb servidors remots i la transferència de fitxers entre la màquina local i la màquina remota. Utilitzarem un script de Python per simular una càrrega de treball i generar un gràfic a partir d'un fitxer de dades. Aquest laboratori es durà a terme a la instància EC2 que hem creat anteriorment.

### Pas 1: Configuració de l'entorn remot a l'EC2 {#pas-1-configuracio-de-lentorn-remot-a-lec2}

Primer, hem de preparar l'entorn a la nostra instància EC2. Això inclou instal·lar les eines necessàries per executar el nostre script de Python i gestionar les dades. Per tant, ens connectarem a la instància EC2 mitjançant SSH com hem fet anteriorment i executarem les següents ordres per instal·lar les eines necessàries.

```bash
# Connecta't a la instància EC2
ssh -i .ssh/aws-keypair ec2-user@<public-ip>
```

1. Actualització del sistema:

  ```bash
  sudo yum update -y
  ```

2. Comprova si tens instal·lat Python i, si no, instal·la'l:

  ```bash
  python3 --version # Comprova si Python està instal·lat
  sudo yum install python3 -y # Instal·la Python si no està instal·lat
  ```

4. Crea un entorn virtual per a Python:

  ```bash
  python3 -m venv myenv
  source myenv/bin/activate
  ```

5. Comprova l'entorn virtual amb un `Hello World`:

```bash
python3 -c "print('Hello World from the virtual environment')"
  ```

::: {.callout-important title="Exercici"}
Ara utiltiza la comanda `exit` per sortir de la màquina remota. Un cop al teu ordinador local, torna a connectar-te a la màquina remota amb SSH i torna a executar la comanda `python3 -c "print('Hello World from the virtual environment')"`. Quin és el resultat? Per què és diferent del que has obtingut abans? Com ho podem solucionar?
:::

6. Instal·la les biblioteques necessàries per al nostre script:

  ```bash
  pip install pandas matplotlib psutil
  ```

7. Crea un directori per al projecte i entra-hi:

  ```bash
  mkdir lab01-workload-simulation
  cd lab01-workload-simulation
  ```

8. Crea el fitxer del script de Python, utilitzant `vi` o `vim`:

  ```bash
  vi simulate_workload.py
  ```
  
  ---
  
  ```python
  #!/usr/bin/env python3
  import sys
  import time
  import pandas as pd
  import matplotlib.pyplot as plt

  def main():
      if len(sys.argv) != 2:
          print("Ús: python3 simulate.py workload.csv")
          sys.exit(1)

      csv_file = sys.argv[1]
      df = pd.read_csv(csv_file)

      print("Simulació d'ús de CPU i memòria (amb gràfic)\n")

      plt.ion()
      fig, ax = plt.subplots()
      cpu_vals, mem_vals, ts_vals = [], [], []

      for i, row in df.iterrows():
          ts = row['timestamp']
          cpu = row['cpu_usage']
          mem = row['memory_usage']

          print(f"[{ts}] CPU: {cpu:.2f}%  |  MEM: {mem:.2f}%")

          ts_vals.append(ts)
          cpu_vals.append(cpu)
          mem_vals.append(mem)

          ax.clear()
          ax.plot(ts_vals, cpu_vals, label="CPU (%)", color="tab:red", marker="o")
          ax.plot(ts_vals, mem_vals, label="Memòria (%)", color="tab:blue", marker="x")
          ax.set_ylim(0, 100)
          ax.set_xlabel("Temps")
          ax.set_ylabel("Ús (%)")
          ax.set_title("Simulació de càrrega del sistema")
          ax.legend()
          plt.xticks(rotation=45)


      print("\n--- Fi de la simulació ---")
      plt.savefig("workload_analysis.png")

  if __name__ == "__main__":
      main()
  ```

9.  Si el fitxer existeix, pots executar-lo amb la següent ordre:

  ```bash
  python3 simulate_workload.py workload.csv
  ```

En aquest punt, hauríeu de veure un error indicant que el fitxer `workload.csv` no existeix. Això és normal perquè encara no hem pujat el fitxer de dades a la instància EC2.

### Pas 2: Transferència del fitxer de dades a la instància EC2 {#pas-2-transferencia-del-fitxer-de-dades-a-la-instancia-ec2}

Per transferir el fitxer de dades `workload.csv` a la instància EC2, utilitzarem SFTP (SSH File Transfer Protocol). SFTP és un protocol segur per transferir fitxers entre un ordinador local i una màquina remota. Utilitzarem el mateix parell de claus SSH que vam crear anteriorment per autenticar-nos a la instància EC2.

- Descarrega't el fitxer de dades [`workload.csv`](./sources/workload.csv) al teu ordinador local.
- Utilitza SFTP per pujar el fitxer de dades a la instància EC2:

```bash
# Substitueix <public-ip> per la IP pública de la teva instància EC2
sftp -i .ssh/aws-keypair ec2-user@<public-ip>:/home/ec2-user/lab01-workload-simulation
# Baixa el fitxer workload.csv del directori remot a la màquina local
put workload.csv
# Tanca la sessió SFTP
exit
```

- Torna a connectar-te a la instància EC2 mitjançant SSH, i executa el programa de Python de nou:

```bash
python3 simulate_workload.py workload.csv
```

Ara hauria de funcionar correctament i generar un fitxer d'imatge amb el gràfic de la càrrega de treball. Pots comprovar que el fitxer d'imatge s'ha creat correctament amb l'ordre `ls -l`. Un cop la imatge s'ha generat, pots utilitzar SFTP per baixar-la a la teva màquina local:

```bash
# Substitueix <public-ip> per la IP pública de la teva instància EC2
sftp -i .ssh/aws-keypair ec2-user@<public-ip>:/home/ec2-user/lab01-workload-simulation
# Baixa el fitxer workload_analysis.png del directori remot a la màquina local
get workload_analysis.png
# Tanca la sessió SFTP
exit
```

::: {.callout-important title="Exercicis"}
1. Com podem descarregar tots els fitxers d'un directori remot a la nostra màquina local utilitzant el protocol SFTP? Per exemple, imagina que necessites descarregar tot el contingut del directori remot anomenat lab-workload-simulation. Explica els passos o la comanda que utilitzaries per dur a terme aquesta tasca de manera eficient.
2. Com podem descarregar un fitxer específic des d'una URL directament a un servidor remot? Per a fer-ho més pràctic, prepara un script que, donada una URL, descarregui un fitxer directament al servidor remot sense passar-lo per la màquina local. Fes el test amb el fitxer `workload.csv` que hem utilitzat en aquest laboratori.
:::


## Eines bàsqiques d'administració {#tasques-basiques-dadministracio}

En aquest apartat, explorarem algunes tasques bàsiques d'administració que podem realitzar en un servidor Linux. Aquestes tasques inclouen la gestió de l'espai en disc.

### Gestió de l'espai en disc {#gestio-de-lespai-en-disc}

Amb la comanda `df -h` podem veure l'espai en disc disponible i utilitzat a les particions del sistema. Aquesta comanda ens mostrarà informació sobre l'espai en disc de cada partició, incloent-hi la mida total, l'espai utilitzat, l'espai disponible i el punt de muntatge. En aquest curs estudiarem el sistema de fitxers en profunditat, però ara només introduirem la comanda i veurem el seu resultat.

```bash
[ec2-user@ip-172-31-30-17 ~]$ df -h
Filesystem        Size  Used Avail Use% Mounted on
devtmpfs          4.0M     0  4.0M   0% /dev
tmpfs             453M     0  453M   0% /dev/shm
tmpfs             181M  424K  181M   1% /run
/dev/nvme0n1p1    8.0G  2.0G  6.1G  25% /
tmpfs             453M     0  453M   0% /tmp
/dev/nvme0n1p128   10M  1.3M  8.7M  13% /boot/efi
tmpfs              91M     0   91M   0% /run/user/1000
```

En aquest cas, podem veure que la partició `/dev/nvme0n1p1` té una mida total de 8.0 GB, amb 2.0 GB utilitzats i 6.1 GB disponibles. Això significa que el 25% de l'espai en disc està utilitzat. El seu punt de muntatge és `/`, que és el directori arrel del sistema de fitxers. La resta de particions les podem ignorar per ara i les veurem en detall més endavant.

A més, també podem utilitzar la comanda `du` per veure l'espai en disc utilitzat per un directori específic. Per exemple, si volem veure l'espai en disc utilitzat pel directori `/home/ec2-user`, podem utilitzar la comanda següent:

```bash
[ec2-user@ip-172-31-30-17 ~]$ du -sh /home/ec2-user
301M    /home/ec2-user
```
Aquesta comanda ens mostrarà l'espai en disc utilitzat pel directori `/home/ec2-user` i tots els seus subdirectoris. L'opció `-s` indica que volem un resum de l'espai utilitzat, i l'opció `-h` mostra la sortida en un format llegible per humans (per exemple, en KB, MB, GB). En aquest cas, podem veure que el directori `/home/ec2-user` utilitza 301 MB d'espai en disc.

Podem crear un fitxer de prova per veure com afecta l'espai en disc. Per exemple, podem crear un fitxer de text gran amb la comanda `dd`:

```bash
dd if=/dev/zero of=largefile.txt bs=1M count=100
```

Aquesta comanda crearà un fitxer anomenat `largefile.txt` de 100 MB ple de zeros. Ara podem tornar a executar la comanda `du -sh /home/ec2-user` per veure com ha canviat l'espai en disc utilitzat pel directori `/home/ec2-user`:

```bash
[ec2-user@ip-172-31-30-17 ~]$ du -sh /home/ec2-user
401M    /home/ec2-user
```

Per eliminar el fitxer que hem creat, podem utilitzar la comanda `rm`:

```bash
rm largefile.txt
```

:::{.callout-important title="Exercici"}
1. Completa aquest script perque ens permeti llegir un fitxer de text línia a línia, cada linia conté el nom i la mida en MB d'un fitxer que volem crear. El script ha de crear els fitxers amb la mida especificada al directori on s'executa el script. 

  ```bash
  while read -r nom_fitxer mida_mb; do
    
  done < "$1"
  ```
2. Utiltiza la comanda `du`, `sort`, `head`, `tail` per obtenir el fitxer més gran i el més petit del directori on s'executa el script.
3. Utilitza la comanda `find` per trobar tots els fitxers més grans de 10 MB al directori on s'executa el script.
:::

## Neteja final {#neteja-final}

Un cop hàgiu acabat el laboratori, és important que tanqueu la instància EC2 per evitar costos innecessaris. Per fer-ho, torneu al tauler d'EC2 i seleccioneu la instància que heu creat. A la part superior de la pantalla, feu clic a `Instance state` i després a `Terminate instance`.

## Entrega del laboratori {#entrega-del-laboratori}

Per a l'entrega d'aquest laboratori, heu de preparar un document PDF amb les respostes completes a tots els exercicis. Un cop finalitzat, cal que el pengeu al [Campus Virtual](https://cv.udl.cat/), a l'apartat designat per al Laboratori 1.

